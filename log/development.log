Started GET "/dishes" for ::1 at 2017-05-28 17:26:05 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by DishesController#index as HTML
  Parameters: {"swallow"=>true}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendering dishes/index.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "dishes"[0m
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" ORDER BY created_at DESC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPicture Load (0.5ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mTag Load (0.3ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mDish Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mPicture Load (0.5ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 7], ["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mTag Load (0.3ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mDish Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 7], ["LIMIT", 1]]
  Rendered dishes/index.html.erb within layouts/application (139.7ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (8.6ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 256ms (Views: 191.2ms | ActiveRecord: 38.1ms)


Started GET "/dishes/8/add_to_cart" for ::1 at 2017-05-28 17:26:08 -0400
Processing by DishesController#add_to_cart as HTML
  Parameters: {"swallow"=>true, "id"=>"8"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.5ms)[0m  [1m[34mSELECT  "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1 AND (dish_id = 8) ORDER BY "cart_items"."id" ASC LIMIT $2[0m  [["cart_id", 53], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "cart_items" ("dish_id", "cart_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["dish_id", 8], ["cart_id", 53], ["amount", 1], ["created_at", 2017-05-28 21:26:08 UTC], ["updated_at", 2017-05-28 21:26:08 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/carts/53
Completed 302 Found in 60ms (ActiveRecord: 12.3ms)


Started GET "/carts/53" for ::1 at 2017-05-28 17:26:08 -0400
Processing by CartsController#show as HTML
  Parameters: {"id"=>"53"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mCartItem Load (0.5ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 53]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (7.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (2.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (11.1ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 67ms (Views: 61.5ms | ActiveRecord: 2.1ms)


Started GET "/orders/53/checkout" for ::1 at 2017-05-28 17:26:11 -0400
Processing by OrdersController#checkout as HTML
  Parameters: {"id"=>"53"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCartItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "cart_items" WHERE "cart_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 53], ["LIMIT", 1]]
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from checkout at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:22)
  Rendering orders/checkout.html.erb within layouts/application
  Rendered orders/checkout.html.erb within layouts/application (12.1ms)
Completed 500 Internal Server Error in 59ms (ActiveRecord: 11.6ms)


  
ActionView::Template::Error (undefined method `adress' for #<User:0x007fb88d9bba20>
Did you mean?  address
               address?
               address=):
    23:     </p>
    24:     <p>
    25:       <label for="order_deliver_to_address">Address</label><br/>
    26:       <%= f.text_field :deliver_to_address, class: "field", :value => current_user.adress%>
    27:     </p>
    28:   </fieldset>
    29: 
  
app/views/orders/checkout.html.erb:26:in `block in _app_views_orders_checkout_html_erb__4322317840333251580_70215278192020'
app/views/orders/checkout.html.erb:1:in `_app_views_orders_checkout_html_erb__4322317840333251580_70215278192020'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.9ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (96.5ms)
Started GET "/orders/53/checkout" for ::1 at 2017-05-28 17:26:57 -0400
Processing by OrdersController#checkout as HTML
  Parameters: {"id"=>"53"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCartItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "cart_items" WHERE "cart_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 53], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendering orders/checkout.html.erb within layouts/application
  Rendered orders/checkout.html.erb within layouts/application (18.4ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 1.7ms)


  
ActionView::Template::Error (undefined method `card_expiration_month' for #<Order:0x007fb88bfb3498>):
    36:   <p>
    37:     <label for="order_card_expiration_month">Expiration date</label><br/>
    38:     <select name="order[card_expiration_month]">
    39:       <%= options_for_select(%w(1 2 3 4 5 6 7 8 9 10 11 12),  @order.card_expiration_month) %>
    40:     </select>
    41:     <select name="order[card_expiration_year]">
    42:       <%= options_for_select(%w(2017 2018 2019 2020 2021 2022 2023 2024 2025 2026 2027), @order.card_expiration_year) %>
  
app/views/orders/checkout.html.erb:39:in `block in _app_views_orders_checkout_html_erb__4322317840333251580_70215284413860'
app/views/orders/checkout.html.erb:1:in `_app_views_orders_checkout_html_erb__4322317840333251580_70215284413860'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.7ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (88.6ms)
Started GET "/orders/53/checkout" for ::1 at 2017-05-28 17:28:06 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by OrdersController#checkout as HTML
  Parameters: {"id"=>"53"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCartItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "cart_items" WHERE "cart_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 53], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from checkout at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:22)
  Rendering orders/checkout.html.erb within layouts/application
  Rendered orders/checkout.html.erb within layouts/application (4.7ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (9.2ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 168ms (Views: 60.8ms | ActiveRecord: 15.3ms)


Started POST "/orders/53/place_order" for ::1 at 2017-05-28 17:28:13 -0400
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SrdND8lesz+4quyIv+/SR4xasOX43h7/m/3XfUkVb/ycG9TJe9XB3OUSZPpDuc9eCKQ2I2ojdWAxB3ji/0qPzw==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"1234", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>"1234"}, "commit"=>"Place Order", "id"=>"53"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.5ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 53]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:28:13 UTC], ["updated_at", 2017-05-28 21:28:13 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 9], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:28:13 UTC], ["updated_at", 2017-05-28 21:28:13 UTC]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:28:13 UTC], ["id", 9]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.799e3], ["updated_at", 2017-05-28 21:28:13 UTC], ["id", 9]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.8789e4], ["updated_at", 2017-05-28 21:28:13 UTC], ["id", 9]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/orders/9
Completed 302 Found in 101ms (ActiveRecord: 22.0ms)


Started GET "/orders/9" for ::1 at 2017-05-28 17:28:13 -0400
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = $1[0m  [["order_id", 9]]
  [1m[36mDish Load (0.2ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered orders/show.html.erb within layouts/application (9.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (1.8ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-05-28 21:28:13 UTC], ["updated_at", 2017-05-28 21:28:13 UTC]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (18.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 80ms (Views: 69.5ms | ActiveRecord: 6.5ms)


Started GET "/dishes" for ::1 at 2017-05-28 17:28:59 -0400
Processing by DishesController#index as HTML
  Parameters: {"swallow"=>true}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering dishes/index.html.erb within layouts/application
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "dishes"[0m
  [1m[36mDish Load (0.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" ORDER BY created_at DESC[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPicture Load (0.4ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mTag Load (0.5ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mDish Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mPicture Load (0.5ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 7], ["LIMIT", 1]]
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mTag Load (0.5ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mDish Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 7], ["LIMIT", 1]]
  Rendered dishes/index.html.erb within layouts/application (95.7ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (9.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 161ms (Views: 132.3ms | ActiveRecord: 25.3ms)


  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/carts/54" for ::1 at 2017-05-28 17:31:47 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by CartsController#show as HTML
  Parameters: {"id"=>"54"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mCartItem Load (0.4ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  Rendered carts/show.html.erb within layouts/application (10.1ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (62.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (71.6ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 158ms (Views: 142.1ms | ActiveRecord: 1.3ms)


Started GET "/dishes" for ::1 at 2017-05-28 17:31:48 -0400
Processing by DishesController#index as HTML
  Parameters: {"swallow"=>true}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering dishes/index.html.erb within layouts/application
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "dishes"[0m
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" ORDER BY created_at DESC[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPicture Load (0.5ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mTag Load (0.3ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mDish Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mPicture Load (0.4ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 7], ["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mTag Load (0.3ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mDish Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 7], ["LIMIT", 1]]
  Rendered dishes/index.html.erb within layouts/application (98.8ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (9.6ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 197ms (Views: 140.6ms | ActiveRecord: 20.5ms)


Started GET "/dishes/8/add_to_cart" for ::1 at 2017-05-28 17:31:50 -0400
Processing by DishesController#add_to_cart as HTML
  Parameters: {"swallow"=>true, "id"=>"8"}
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mDish Load (0.7ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCartItem Load (4.9ms)[0m  [1m[34mSELECT  "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1 AND (dish_id = 8) ORDER BY "cart_items"."id" ASC LIMIT $2[0m  [["cart_id", 54], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "cart_items" ("dish_id", "cart_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["dish_id", 8], ["cart_id", 54], ["amount", 1], ["created_at", 2017-05-28 21:31:50 UTC], ["updated_at", 2017-05-28 21:31:50 UTC]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/carts/54
Completed 302 Found in 40ms (ActiveRecord: 14.2ms)


Started GET "/carts/54" for ::1 at 2017-05-28 17:31:50 -0400
Processing by CartsController#show as HTML
  Parameters: {"id"=>"54"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mCartItem Load (0.5ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (5.7ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (3.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (11.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 67ms (Views: 61.8ms | ActiveRecord: 2.7ms)


Started GET "/dishes" for ::1 at 2017-05-28 17:31:52 -0400
Processing by DishesController#index as HTML
  Parameters: {"swallow"=>true}
  [1m[36mCart Load (3.9ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering dishes/index.html.erb within layouts/application
  [1m[35m (7.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "dishes"[0m
  [1m[36mDish Load (7.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" ORDER BY created_at DESC[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mPicture Load (0.6ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 8], ["LIMIT", 1]]
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mTag Load (0.6ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 8]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mDish Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mPicture Load (0.6ms)[0m  [1m[34mSELECT  "pictures".* FROM "pictures" WHERE "pictures"."dish_id" = $1 ORDER BY "pictures"."id" ASC LIMIT $2[0m  [["dish_id", 7], ["LIMIT", 1]]
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" INNER JOIN "categorizings" ON "categories"."id" = "categorizings"."category_id" WHERE "categorizings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mTag Load (0.5ms)[0m  [1m[34mSELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."dish_id" = $1[0m  [["dish_id", 7]]
  [1m[36mDish Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "dishes" INNER JOIN "favorites" ON "dishes"."id" = "favorites"."favorited_id" WHERE "favorites"."user_id" = $1 AND "favorites"."favorited_type" = $2 AND "dishes"."id" = $3 LIMIT $4[0m  [["user_id", 20], ["favorited_type", "Dish"], ["id", 7], ["LIMIT", 1]]
  Rendered dishes/index.html.erb within layouts/application (51.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (9.1ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 118ms (Views: 88.1ms | ActiveRecord: 25.6ms)


Started GET "/dishes/7/add_to_cart" for ::1 at 2017-05-28 17:31:53 -0400
Processing by DishesController#add_to_cart as HTML
  Parameters: {"swallow"=>true, "id"=>"7"}
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mDish Load (1.1ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.8ms)[0m  [1m[34mSELECT  "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1 AND (dish_id = 7) ORDER BY "cart_items"."id" ASC LIMIT $2[0m  [["cart_id", 54], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (6.5ms)[0m  [1m[32mINSERT INTO "cart_items" ("dish_id", "cart_id", "amount", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["dish_id", 7], ["cart_id", 54], ["amount", 1], ["created_at", 2017-05-28 21:31:53 UTC], ["updated_at", 2017-05-28 21:31:53 UTC]]
  [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/carts/54
Completed 302 Found in 26ms (ActiveRecord: 14.7ms)


Started GET "/carts/54" for ::1 at 2017-05-28 17:31:53 -0400
Processing by CartsController#show as HTML
  Parameters: {"id"=>"54"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mCartItem Load (0.5ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.6ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (9.4ms)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (3.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (9.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 78ms (Views: 69.3ms | ActiveRecord: 3.7ms)


Started GET "/orders/54/checkout" for ::1 at 2017-05-28 17:31:56 -0400
Processing by OrdersController#checkout as HTML
  Parameters: {"id"=>"54"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Exists (4.2ms)[0m  [1m[34mSELECT  1 AS one FROM "cart_items" WHERE "cart_items"."cart_id" = $1 LIMIT $2[0m  [["cart_id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from checkout at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:22)
  Rendering orders/checkout.html.erb within layouts/application
  Rendered orders/checkout.html.erb within layouts/application (3.7ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (17.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 112ms (Views: 70.2ms | ActiveRecord: 10.2ms)


Started POST "/orders/54/place_order" for ::1 at 2017-05-28 17:31:59 -0400
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Y7gEgD6AV5lemW0O6MaQEM43MNxJP/xFoj2M1MgMeExxtCeNxvM7OU7shAI7n50wLdlhdRNOkjRAcJcB8TPbLw==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>""}, "commit"=>"Place Order", "id"=>"54"}
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.4ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:31:59 UTC], ["updated_at", 2017-05-28 21:31:59 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 10], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:31:59 UTC], ["updated_at", 2017-05-28 21:31:59 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 7], ["order_id", 10], ["unit_price", 0.199e4], ["quantity", 1], ["total_price", 0.199e4], ["created_at", 2017-05-28 21:31:59 UTC], ["updated_at", 2017-05-28 21:31:59 UTC]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:31:59 UTC], ["id", 10]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.998e3], ["updated_at", 2017-05-28 21:31:59 UTC], ["id", 10]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.10978e5], ["updated_at", 2017-05-28 21:31:59 UTC], ["id", 10]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 278ms (ActiveRecord: 21.3ms)


  
NameError (undefined local variable or method `nill' for #<OrdersController:0x007fb883c78f60>
Did you mean?  nil?):
  
app/controllers/orders_controller.rb:40:in `place_order'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.7ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (145.6ms)
Started POST "/orders/54/place_order" for ::1 at 2017-05-28 17:32:14 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lNKNtyA2W7d5GvDJyKbeyPBAvPvcibUaRe70LL1f24FCfhRxkr0pVCSieLs08MPRdL46PU503oXvFFuzCwA7sg==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>""}, "commit"=>"Place Order", "id"=>"54"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from place_order at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:30)
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.3ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:32:14 UTC], ["updated_at", 2017-05-28 21:32:14 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 11], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:32:14 UTC], ["updated_at", 2017-05-28 21:32:14 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 7], ["order_id", 11], ["unit_price", 0.199e4], ["quantity", 1], ["total_price", 0.199e4], ["created_at", 2017-05-28 21:32:14 UTC], ["updated_at", 2017-05-28 21:32:14 UTC]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:32:14 UTC], ["id", 11]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.998e3], ["updated_at", 2017-05-28 21:32:14 UTC], ["id", 11]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.10978e5], ["updated_at", 2017-05-28 21:32:14 UTC], ["id", 11]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendering order_mailer/cook_order.html.erb within layouts/mailer
  Rendered order_mailer/cook_order.html.erb within layouts/mailer (367.5ms)
OrderMailer#cook_order: processed outbound mail in 386.2ms
Completed 500 Internal Server Error in 818ms (ActiveRecord: 22.9ms)


  
ActionView::Template::Error (undefined local variable or method `current_user' for #<#<Class:0x007fb88c36c0a8>:0x007fb88c35ec28>
Did you mean?  current_dish):
    3: <p>Hi <%= @user.name %>,</p>
    4: 
    5: <p>
    6: <%= current_user.name %> has bought you the following dishes:
    7: 
    8: <ul>
    9:   <li>
  
app/views/order_mailer/cook_order.html.erb:6:in `_app_views_order_mailer_cook_order_html_erb__2431264222132424366_70215301556300'
app/mailers/order_mailer.rb:10:in `cook_order'
app/controllers/orders_controller.rb:44:in `block in place_order'
app/controllers/orders_controller.rb:41:in `place_order'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (6.1ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (95.5ms)
Started POST "/orders/54/place_order" for ::1 at 2017-05-28 17:33:59 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lNKNtyA2W7d5GvDJyKbeyPBAvPvcibUaRe70LL1f24FCfhRxkr0pVCSieLs08MPRdL46PU503oXvFFuzCwA7sg==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>""}, "commit"=>"Place Order", "id"=>"54"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from place_order at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:30)
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.6ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:33:59 UTC], ["updated_at", 2017-05-28 21:33:59 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 12], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:33:59 UTC], ["updated_at", 2017-05-28 21:33:59 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 7], ["order_id", 12], ["unit_price", 0.199e4], ["quantity", 1], ["total_price", 0.199e4], ["created_at", 2017-05-28 21:33:59 UTC], ["updated_at", 2017-05-28 21:33:59 UTC]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:33:59 UTC], ["id", 12]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.998e3], ["updated_at", 2017-05-28 21:33:59 UTC], ["id", 12]]
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.10978e5], ["updated_at", 2017-05-28 21:33:59 UTC], ["id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
OrderMailer#cook_order: processed outbound mail in 7.0ms
Completed 500 Internal Server Error in 188ms (ActiveRecord: 28.5ms)


  
NameError (undefined local variable or method `user' for #<OrderMailer:0x007fb88c10dbe0>):
  
app/mailers/order_mailer.rb:11:in `cook_order'
app/controllers/orders_controller.rb:44:in `block in place_order'
app/controllers/orders_controller.rb:41:in `place_order'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (4.8ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (93.3ms)
Started POST "/orders/54/place_order" for ::1 at 2017-05-28 17:34:23 -0400
DEPRECATION WARNING: before_filter is deprecated and will be removed in Rails 5.1. Use before_action instead. (called from <class:ApplicationController> at /Users/federico/Desktop/grupo-3/app/controllers/application_controller.rb:4)
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lNKNtyA2W7d5GvDJyKbeyPBAvPvcibUaRe70LL1f24FCfhRxkr0pVCSieLs08MPRdL46PU503oXvFFuzCwA7sg==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>""}, "commit"=>"Place Order", "id"=>"54"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
DEPRECATION WARNING: Time columns will become time zone aware in Rails 5.1. This
still causes `String`s to be parsed as if they were in `Time.zone`,
and `Time`s to be converted to `Time.zone`.

To keep the old behavior, you must add the following to your initializer:

    config.active_record.time_zone_aware_types = [:datetime]

To silence this deprecation warning, add the following:

    config.active_record.time_zone_aware_types = [:datetime, :time]
 (called from place_order at /Users/federico/Desktop/grupo-3/app/controllers/orders_controller.rb:30)
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.3ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.4ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:34:23 UTC], ["updated_at", 2017-05-28 21:34:23 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 13], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:34:23 UTC], ["updated_at", 2017-05-28 21:34:23 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 7], ["order_id", 13], ["unit_price", 0.199e4], ["quantity", 1], ["total_price", 0.199e4], ["created_at", 2017-05-28 21:34:23 UTC], ["updated_at", 2017-05-28 21:34:23 UTC]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:34:23 UTC], ["id", 13]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.998e3], ["updated_at", 2017-05-28 21:34:23 UTC], ["id", 13]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.10978e5], ["updated_at", 2017-05-28 21:34:23 UTC], ["id", 13]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendering order_mailer/cook_order.html.erb within layouts/mailer
  Rendered order_mailer/cook_order.html.erb within layouts/mailer (0.7ms)
  Rendering order_mailer/cook_order.text.erb within layouts/mailer
  Rendered order_mailer/cook_order.text.erb within layouts/mailer (2.7ms)
OrderMailer#cook_order: processed outbound mail in 22.8ms
Completed 500 Internal Server Error in 202ms (ActiveRecord: 10.9ms)


  
ActionView::Template::Error (undefined method `name' for nil:NilClass):
    1: Hi <%= @user.name %>,
    2: 
    3: 
    4: <%= current_user.name %> has bought you the following dishes:
  
app/views/order_mailer/cook_order.text.erb:1:in `_app_views_order_mailer_cook_order_text_erb___3864210784984964396_70215341279920'
app/mailers/order_mailer.rb:11:in `cook_order'
app/controllers/orders_controller.rb:44:in `block in place_order'
app/controllers/orders_controller.rb:41:in `place_order'
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (8.6ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendering /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/federico/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/actionpack-5.0.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (91.7ms)
Started POST "/orders/54/place_order" for ::1 at 2017-05-28 17:34:55 -0400
Processing by OrdersController#place_order as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lNKNtyA2W7d5GvDJyKbeyPBAvPvcibUaRe70LL1f24FCfhRxkr0pVCSieLs08MPRdL46PU503oXvFFuzCwA7sg==", "order"=>{"customer_email"=>"federico.kunze94@gmail.com", "customer_phone_number"=>"5622458232", "deliver_to_first_name"=>"Federico", "deliver_to_last_name"=>"Kunze", "deliver_to_address"=>"El Robledal 13261", "card_number"=>"", "card_expiration_month"=>"1", "card_expiration_year"=>"2017", "card_verification_value"=>""}, "commit"=>"Place Order", "id"=>"54"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
Unpermitted parameters: customer_email, card_number, card_expiration_month, card_expiration_year, card_verification_value
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mCartItem Load (0.4ms)[0m  [1m[34mSELECT "cart_items".* FROM "cart_items" WHERE "cart_items"."cart_id" = $1[0m  [["cart_id", 54]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mDish Load (0.5ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("status", "payment_method", "created_at", "updated_at", "user_id", "customer_ip") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["status", "UNPAID"], ["payment_method", "Cash"], ["created_at", 2017-05-28 21:34:55 UTC], ["updated_at", 2017-05-28 21:34:55 UTC], ["user_id", 20], ["customer_ip", "::1"]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 8], ["order_id", 14], ["unit_price", 0.799e4], ["quantity", 1], ["total_price", 0.799e4], ["created_at", 2017-05-28 21:34:55 UTC], ["updated_at", 2017-05-28 21:34:55 UTC]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "order_items" ("dish_id", "order_id", "unit_price", "quantity", "total_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["dish_id", 7], ["order_id", 14], ["unit_price", 0.199e4], ["quantity", 1], ["total_price", 0.199e4], ["created_at", 2017-05-28 21:34:55 UTC], ["updated_at", 2017-05-28 21:34:55 UTC]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tipping" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tipping", true], ["updated_at", 2017-05-28 21:34:55 UTC], ["id", 14]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "tips" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["tips", 0.998e3], ["updated_at", 2017-05-28 21:34:55 UTC], ["id", 14]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "orders" SET "final_price" = $1, "updated_at" = $2 WHERE "orders"."id" = $3[0m  [["final_price", 0.10978e5], ["updated_at", 2017-05-28 21:34:55 UTC], ["id", 14]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendering order_mailer/cook_order.html.erb within layouts/mailer
  Rendered order_mailer/cook_order.html.erb within layouts/mailer (0.6ms)
  Rendering order_mailer/cook_order.text.erb within layouts/mailer
  Rendered order_mailer/cook_order.text.erb within layouts/mailer (0.4ms)
OrderMailer#cook_order: processed outbound mail in 20.7ms
Sent mail to federico.kunze94@gmail.com (3306.5ms)
Date: Sun, 28 May 2017 17:34:56 -0400
From: federico.kunze94@gmail.com
To: federico.kunze94@gmail.com
Message-ID: <592b428036cf_9ecb3fdc4233931c3254f@MacBook-Pro-de-Federico.local.mail>
Subject: [Eats] You have recieved a new order
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_592b42801ff7_9ecb3fdc4233931c324f2";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_592b42801ff7_9ecb3fdc4233931c324f2
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi Federico Kunze,


Federico Kunze has bought you the following dishes:


- Dish 1


Click here to see the order and accept the preparation of your dishes.

Please update the order status after preparation to inform your custumer that his order it's on its way.

Eats Team


----==_mimepart_592b42801ff7_9ecb3fdc4233931c324f2
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      /* Email styles need to be inline */
    </style>
  </head>

  <body>
    <h1>Eats</h1>

<p>Hi Federico Kunze,</p>

<p>
Federico Kunze has bought you the following dishes:

<ul>
  <li>
    Dish 1
  </li>
</ul>

Click here to see the order and accept the preparation of your dishes.

Please update the order status after preparation to inform your custumer that his order it's on its way.

Eats Team
</p>

  </body>
</html>

----==_mimepart_592b42801ff7_9ecb3fdc4233931c324f2--

  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendering order_mailer/cook_order.html.erb within layouts/mailer
  Rendered order_mailer/cook_order.html.erb within layouts/mailer (0.2ms)
  Rendering order_mailer/cook_order.text.erb within layouts/mailer
  Rendered order_mailer/cook_order.text.erb within layouts/mailer (0.0ms)
OrderMailer#cook_order: processed outbound mail in 19.6ms
Sent mail to fekunze@icloud.com (3195.9ms)
Date: Sun, 28 May 2017 17:34:59 -0400
From: federico.kunze94@gmail.com
To: fekunze@icloud.com
Message-ID: <592b4283530cb_9ecb3fdc4233931c3276b@MacBook-Pro-de-Federico.local.mail>
Subject: [Eats] You have recieved a new order
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_592b4283527a9_9ecb3fdc4233931c32652";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_592b4283527a9_9ecb3fdc4233931c32652
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi Federico Kunze,


Federico Kunze has bought you the following dishes:


- Dish 1


Click here to see the order and accept the preparation of your dishes.

Please update the order status after preparation to inform your custumer that his order it's on its way.

Eats Team


----==_mimepart_592b4283527a9_9ecb3fdc4233931c32652
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      /* Email styles need to be inline */
    </style>
  </head>

  <body>
    <h1>Eats</h1>

<p>Hi Federico Kunze,</p>

<p>
Federico Kunze has bought you the following dishes:

<ul>
  <li>
    Dish 1
  </li>
</ul>

Click here to see the order and accept the preparation of your dishes.

Please update the order status after preparation to inform your custumer that his order it's on its way.

Eats Team
</p>

  </body>
</html>

----==_mimepart_592b4283527a9_9ecb3fdc4233931c32652--

  Rendering order_mailer/user_order.html.erb within layouts/mailer
  Rendered order_mailer/user_order.html.erb within layouts/mailer (0.5ms)
  Rendering order_mailer/user_order.text.erb within layouts/mailer
  Rendered order_mailer/user_order.text.erb within layouts/mailer (0.4ms)
OrderMailer#user_order: processed outbound mail in 21.4ms
Sent mail to federico.kunze94@gmail.com (3033.1ms)
Date: Sun, 28 May 2017 17:35:02 -0400
From: federico.kunze94@gmail.com
To: federico.kunze94@gmail.com
Message-ID: <592b428688458_9ecb3fdc4233931c3296b@MacBook-Pro-de-Federico.local.mail>
Subject: [Eats] Order confirmed
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_592b428687c76_9ecb3fdc4233931c328d5";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_592b428687c76_9ecb3fdc4233931c328d5
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Eats

Hi Federico Kunze,


Thanks for prefering us. Your order will be prepared soon. We'll let you now when it's on its way to your home.

To see your order click here.

Eats Team


----==_mimepart_592b428687c76_9ecb3fdc4233931c328d5
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      /* Email styles need to be inline */
    </style>
  </head>

  <body>
    <p>Hi Federico Kunze,</p>

<p>
Thanks for prefering us. Your order will be prepared soon. We'll let you now when it's on its way to your home.

To see your order click here.

Eats Team
</p>

  </body>
</html>

----==_mimepart_592b428687c76_9ecb3fdc4233931c328d5--

Redirected to http://localhost:3000/orders/14
Completed 302 Found in 9651ms (ActiveRecord: 11.9ms)


Started GET "/orders/14" for ::1 at 2017-05-28 17:35:05 -0400
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"14"}
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  [1m[36mOrderItem Load (0.5ms)[0m  [1m[34mSELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = $1[0m  [["order_id", 14]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mDish Load (0.3ms)[0m  [1m[34mSELECT  "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  Rendered orders/show.html.erb within layouts/application (11.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  Rendered layouts/_sidebar.html.erb (1.8ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", 2017-05-28 21:35:05 UTC], ["updated_at", 2017-05-28 21:35:05 UTC]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  Rendered layouts/_navbar.html.erb (20.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 99ms (Views: 82.6ms | ActiveRecord: 10.2ms)


